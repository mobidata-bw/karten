import{a as n,l as y,i as v,b as O,c as h,d as T}from"../../addControlLayers-rYPp_YsP.js";import{s as D,a as m,b as w,c as x,l as b,d as P,e as E,p as S,f as G,g as z,h as B}from"../../popupContent-Do1usvbh.js";import{u as _}from"../../timeStamps-CJ2Ek9ou.js";import{p as I}from"../../popups-lkEUEafF.js";import"../../popupImages-B42emawS.js";window.PUBLIC_PATH="/karten/";const{purpose:k,object:j,geometry:A,controlLayersTitle:d}=_();let s=null;function M(e){if(A=="polygon")e.on("zoomend",function(){const a=e.getZoom();let i;a<13?(i=l.filter(r=>r.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","visible")):(i=l.filter(r=>!r.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","none"));const o={collapsed:!1,layers:n(i,d)};s!=null&&e.removeControl(s),s=new y(o),s._exclusiveAllGroups=!0,e.addControl(s)}),e.fire("zoomend");else if(A==null&&j==null){let a,i;k=="car"?(a=t,i="Behindertenparkplätze"):k=="bicycle"&&(a=g,i="Schließfächer an Fahrradabstellanlagen");const o={collapsed:!1,layers:n(L,d)},r=new y(o);r._exclusiveAllGroups=!0,e.addControl(r,"top-right");const c={collapsed:!1,layers:n(a,i)},f=new y(c);e.addControl(f,"top-right")}else{const a={collapsed:!1,layers:n(l,d)},i=new y(a);i._exclusiveAllGroups=!0,e.addControl(i,"top-right")}}let l,L,t,g=E;window.addEventListener("DOMContentLoaded",()=>{const{purpose:e,type:a,geometry:i,object:o}=_(),r=v(),c={};e=="bicycle"&&(c.style="bicycle"),O(r,c),r.on("load",()=>{[{id:"sourceParkApiCar",source:D},{id:"sourceParkApiCarLines",source:m},{id:"sourceParkApiCarPolygons",source:w},{id:"sourceParkApiBicycle",source:x}].forEach(u=>h(r,u));let p,C;e=="car"?i==null&&o==null?(p=!0,a==null?t=G:a=="buildings"?t=z:t=B):p=!1:e=="bicycle"&&(C=!0),L=[...b,...P],l=r.layerGroups({occupancy:b,type:P,...p?{occupancy_disabled:t}:{},...C?{occupancy_item:g}:{}}),l.forEach(u=>T(r,u)),M(r),I(r,l,S)})});
