import{k as F}from"./addControlLayers-Bt0fKlOZ.js";import{t as z}from"./timeStamps-0NhGikBN.js";import{p as M}from"./popupImages-BljZEjOZ.js";const H={NO_REALTIME_INFORMATION:{label:"Echtzeitdaten nicht vorhanden",subGroup:"Belegung",filter:["any",["all",["==",["get","parking_object"],"site"],["==",["get","has_realtime_data"],!1]],["all",["==",["get","parking_object"],"spot"],["any",["==",["get","realtime_status"],"UNKNOWN"],["==",["get","has_realtime_data"],!1]]]],color:"#615fdf"},OUTDATED_REALTIME_INFORMATION:{label:"Echtzeitdaten älter 30 Minuten",subGroup:"Belegung",filter:["all",["==",["get","has_realtime_data"],!0],["==",["get","realtime_data_outdated"],!0],["!=",["get","source_id"],55]],color:"#cacaca"},CLOSED:{label:"Geschlossen",subGroup:"Belegung",filter:["==",["get","realtime_opening_status"],"CLOSED"],color:"#880000"},VERY_LOW_AVAILABILITY:{label:"Kaum Plätze (unter 2 %)",subGroup:"Belegung",filter:["any",["all",["==",["get","parking_object"],"site"],["==",["get","has_realtime_data"],!0],["all",[">=",["get","realtime_free_capacity"],0],["<",["/",["*",1,["get","realtime_free_capacity"]],["case",["has","realtime_capacity"],["get","realtime_capacity"],["get","capacity"]]],.02],["!=",["get","realtime_opening_status"],"CLOSED"]],["any",["==",["get","realtime_data_outdated"],!1],["==",["get","source_id"],55]]],["all",["==",["get","parking_object"],"spot"],["==",["get","realtime_status"],"TAKEN"],["==",["get","has_realtime_data"],!0],["any",["==",["get","realtime_data_outdated"],!1],["==",["get","source_id"],55]]]],color:"#ed0000"},LOW_AVAILABILITY:{label:"Wenig Plätze (2 bis 20 %)",subGroup:"Belegung",filter:["all",["==",["get","parking_object"],"site"],["==",["get","has_realtime_data"],!0],["all",[">=",["/",["*",1,["get","realtime_free_capacity"]],["case",["has","realtime_capacity"],["get","realtime_capacity"],["get","capacity"]]],.02],["<=",["/",["*",1,["get","realtime_free_capacity"]],["case",["has","realtime_capacity"],["get","realtime_capacity"],["get","capacity"]]],.2]],["!=",["get","realtime_opening_status"],"CLOSED"],["any",["==",["get","realtime_data_outdated"],!1],["==",["get","source_id"],55]]],color:"#dfab27"},HIGH_AVAILABILITY:{label:"Viele Plätze (über 20 %)",subGroup:"Belegung",filter:["any",["all",["==",["get","parking_object"],"site"],["==",["get","has_realtime_data"],!0],[">",["/",["*",1,["get","realtime_free_capacity"]],["case",["has","realtime_capacity"],["get","realtime_capacity"],["get","capacity"]]],.2],["!=",["get","realtime_opening_status"],"CLOSED"],["any",["==",["get","realtime_data_outdated"],!1],["==",["get","source_id"],55]]],["all",["==",["get","parking_object"],"spot"],["==",["get","realtime_status"],"AVAILABLE"],["==",["get","has_realtime_data"],!0],["any",["==",["get","realtime_data_outdated"],!1],["==",["get","source_id"],55]]]],color:"#059b02"}},U={CAR_PARK:{label:"Parkhaus",subGroup:"Typ",filter:["==",["get","type"],"CAR_PARK"],color:"#5587eb"},UNDERGROUND:{label:"Tiefgarage",subGroup:"Typ",filter:["==",["get","type"],"UNDERGROUND"],color:"#BF91B6"},OFF_STREET_PARKING_GROUND:{label:"Parkplatz abseits der Straße",subGroup:"Typ",filter:["==",["get","type"],"OFF_STREET_PARKING_GROUND"],color:"#009688"},FLOOR:{label:"Abstellfläche",subGroup:"Typ",filter:["==",["get","type"],"FLOOR"],color:"black"},BUILDING:{label:"Parkhaus",subGroup:"Typ",filter:["==",["get","type"],"BUILDING"],color:"#c2e72a"},LOCKBOX:{label:"Schließfach",subGroup:"Typ",filter:["==",["get","type"],"LOCKBOX"],color:"white"},TWO_TIER:{label:"Zweistock-Abstellanlage",subGroup:"Typ",filter:["==",["get","type"],"TWO_TIER"],color:"#009688"},SHED:{label:"Sammelanlage",subGroup:"Typ",filter:["==",["get","type"],"SHED"],color:"#ee5959"},LOCKERS:{label:"Fahrradschrank",subGroup:"Typ",filter:["==",["get","type"],"LOCKERS"],color:"#ff9933"},STANDS:{label:"Anlehnbügel",subGroup:"Typ",filter:["==",["get","type"],"STANDS"],color:"#bf91b6"},SAFE_WALL_LOOPS:{label:"Vorderradhalter mit Sicherung",subGroup:"Typ",filter:["==",["get","type"],"SAFE_WALL_LOOPS"],color:"#30D5C8"},WALL_LOOPS:{label:"Vorderradhalter",subGroup:"Typ",filter:["==",["get","type"],"WALL_LOOPS"],color:"#5587eb"},OTHER:{label:"Sonstige",subGroup:"Typ",filter:["==",["get","type"],"OTHER"],color:"#cacaca"}},w={PARKING_SPOT:{label:"Einzelparkplatz",subGroup:"Parkobjekt",filter:["==",["get","parking_object"],"spot"],color:"#92474d"},PARKING_SITE:{label:"Parkstreifen",subGroup:"Parkobjekt",filter:["==",["get","parking_object"],"site"],color:"#25604c"}},j={DISABLED:{label:"Behinderte",subGroup:"Sonderparkplätze",filter:["any",[">","capacity_disabled",0],["==","restriction_type","DISABLED"]],color:"#005ea8"},WOMAN:{label:"Frauen",subGroup:"Sonderparkplätze",filter:["any",[">","capacity_woman",0],["==","restriction_type","WOMAN"]],color:"#cb3234"},FAMILY:{label:"Familien",subGroup:"Sonderparkplätze",filter:["any",[">","capacity_family",0],["==","restriction_type","FAMILY"]],color:"#CC33FF"},CHARGING:{label:"Lademöglichkeit",subGroup:"Sonderparkplätze",filter:["any",[">","capacity_charging",0],["==","restriction_type","CHARGING"]],color:"#95a819"},CARSHARING:{label:"Carsharing",subGroup:"Sonderparkplätze",filter:["any",[">","capacity_carsharing",0],["==","restriction_type","CARSHARING"]],color:"#56c1d1"}};function D(r){const p=r.capacity,S=r.realtime_capacity,_=r.realtime_free_capacity;if(_&&p&&(p!=0||S!=0)){const f=document.getElementById("anchor-"+r.id);if(f){const P='<td rowspan="7"><canvas class="canvasPie" id="canvas-'+r.id+'" width="110" height="96"></canvas></td>';f.outerHTML=P;const u=document.getElementById("canvas-"+r.id),e=u.getContext("2d"),n=S||p,t=_/n,R=(n-_)/n,E=(t*100).toFixed(0)+"%",i=(R*100).toFixed(0)+"%",y=(t*100).toFixed(0)+"%";let T=t*2,b=(1-t)*2;const C=["#5ce75c","#8B0000"],I=[E,i],A=[Math.PI*T,Math.PI*b],k=1;let c=-Math.PI/2,g=c;const l=u.width/2-10,d=u.height/2+7,s=40;for(let a=0;a<A.length;a++){c=g,g=g+A[a];const o=(c+g)/2,L=Math.cos(o)*k,h=Math.sin(o)*k;e.beginPath(),e.fillStyle=C[a%C.length],e.moveTo(l+L,d+h),e.arc(l+L,d+h,s,c,g),e.lineTo(l+L,d+h),e.fill(),b!==2&&b!==0&&(e.strokeStyle="white",e.lineWidth=.5,e.stroke());let O=l+Math.cos(o)*(s-18),m=d+Math.sin(o)*(s-18);e.fillStyle="white",e.font="bold 11px Arial",e.textAlign="center",n===_||_===0?e.fillText(y,l,d):((t<.15&&a===0||R<.15&&a===1)&&(e.fillStyle="black",O=l+Math.cos(o)*(s+5),m=d+Math.sin(o)*(s+5)),e.fillText(I[a],O,m))}}}}function x(r){D(r);const{parking_object:p,realtime_data_updated_at:S,realtime_data_outdated:_,has_realtime_data:f,source_id:P,id:u,name:e,operator_name:n,type:t,purpose:R,address:E,park_and_ride_type:i,realtime_opening_status:y,capacity:T,capacity_disabled:b,capacity_woman:C,capacity_family:I,capacity_charging:A,capacity_carsharing:k,realtime_capacity:c,realtime_free_capacity:g,public_url:l,photo_url:d,realtime_status:s,restriction_type:a,restriction_hours:o,restriction_max_stay:L}=r;let h,O;S&&({date:h,time:O}=z(S));let m=new Map;m={2:"Stadt Freiburg im Breisgau",3:"Stadt Heidelberg",6:"DB BahnPark",7:"Parkraumgesellschaft Baden-Württemberg mbH",8:"Stadt Neckarsulm",9:"Verband Region Stuttgart",10:"Stadt Pforzheim",11:"Stadt Reutlingen",12:"Stadt Karlsruhe",15:"Stadt Reutlingen",16:"Verkehrsministerium Baden-Württemberg",21:"Stadt Karlsruhe",22:"Stadt Ellwangen",23:"Stadt Buchen",24:"Stadt Bietigheim-Bissingen",25:"Verkehrsministerium Baden-Württemberg",26:"APCOA PARKING",27:"Stadt Herrenberg",28:"RadVIS",29:"Goldbeck",30:"Open-Data-Plattform Schweiz",31:"Kienzler",33:"Kienzler",34:"Kienzler",35:"Kienzler",36:"Kienzler",37:"Stadt Konstanz",38:"NVBW",39:"NVBW",40:"Verband Region Stuttgart",41:"Verband Region Stuttgart",42:"Verband Region Stuttgart",43:"Verband Region Stuttgart",44:"PARK SERVICE HÜFNER",45:"Stadt Herrenberg",46:"Kienzler",47:"Stadt Konstanz",48:"Stadt Mannheim",49:"VELOBRIX",50:"Verkehrsverbund Rhein-Neckar",51:"Stadt Friedrichshafen",52:"Stadt Freiburg im Breisgau",53:"Stadt Freiburg im Breisgau",54:"Stadt Ulm",55:"Stadt Mannheim",56:"Stadt Freiburg im Breisgau",57:"Stadt Freiburg im Breisgau",58:"B+B Parkhaus GmbH & Co. KG",59:"Stadt Freiburg im Breisgau",60:"Stadt Heidelberg",61:"Stadt Esslingen",62:"Stadt Keltern",63:"Stadt Reutlingen",64:"Stadt Stuttgart",65:"Stadt Aalen",66:"Stadt Konstanz"};let B="",G="";for(let N in m)P==N&&(B+=M(m[N]),G+=`<td class="attContent">${m[N]}</td>`);const K="<table>                <tr>"+B+(e?'<th class="title">'+e+"</th>":"")+"</table><br><table>"+(G==""?"":'<tr>            <td class="att">Datengeber</td>'+G+"</tr>")+(!n||n=="-"||n==""?"":'<tr>            <td class="att">Betreiber</td>            <td class="attContent">'+n+"</td>        </tr> ")+(t?'<tr>            <td class="att">Typ</td>'+(t=="ON_STREET"?'<td class="attContent">Straßen-Parkplatz</td>':"")+(t=="OFF_STREET_PARKING_GROUND"?'<td class="attContent">Parkplatz abseits der Straße</td>':"")+(t=="CAR_PARK"?'<td class="attContent">Parkhaus</td>':"")+(t=="UNDERGROUND"?'<td class="attContent">Tiefgarage</td>':"")+(t=="WALL_LOOPS"?'<td class="attContent">Vorderradhalter</td>':"")+(t=="SAFE_WALL_LOOPS"?'<td class="attContent">Vorderradhalter mit Sicherung</td>':"")+(t=="STANDS"?'<td class="attContent">Anlehnbügel</td>':"")+(t=="LOCKERS"&&R=="BIKE"?'<td class="attContent">Fahrradschrank</td>':"")+(t=="LOCKERS"&&R=="ITEM"||t=="LOCKBOX"?'<td class="attContent">Schließfach</td>':"")+(t=="SHED"?'<td class="attContent">Sammelanlage</td>':"")+(t=="TWO_TIER"?'<td class="attContent">Zweistock-Abstellanlage</td>':"")+(t=="BUILDING"?'<td class="attContent">Parkhaus</td>':"")+(t=="FLOOR"?'<td class="attContent">Abstellfläche</td>':"")+(t=="OTHER"?'<td class="attContent">Sonstige</td>':"")+"</tr>":"")+(!E||E==""?"":'<tr>                <td class="att">Adresse</td>                <td class="attContent">'+E+"</td>            </tr>")+(i?'<tr>            <td class="att">P+R-Typ</td>'+(i=="CARPOOL"?'<td class="attContent">Fahrgemeinschaft</td>':"")+(i=="TRAIN"?'<td class="attContent">Bahn</td>':"")+(i=="BUS"?'<td class="attContent">Bus</td>':"")+(i=="TRAM"?'<td class="attContent">Straßenbahn</td>':"")+(i=="YES"?'<td class="attContent">ja</td>':"")+(i=="NO"?'<td class="attContent">nein</td>':"")+"</tr>":"")+(y?'<tr>            <td class="att">Status</td>'+(y=="OPEN"?'<td class="attContent">geöffnet</td>':"")+(y=="CLOSED"?'<td class="attContent">geschlossen</td>':"")+(y=="UNKNOWN"?'<td class="attContent">unbekannt</td>':"")+"</tr>":"")+(f==!1?"":'<tr>            <td class="att">Stand Echtzeitdaten</td>'+(_?'<td class="attContent outDated">'+h+", "+O+"</td>":'<td class="attContent">'+h+", "+O+"</td>")+"</tr>")+'</tr>            </table>            <br>            <div class="title title2">Parkplätze</div>            <div id="divParkingSites">                <div>                    <div id="anchor-'+u+'"></div>                </div>                <div id="divTable">                    <table>                        <tr>'+(p=="spot"?'<td class="att">alle (frei/gesamt)</td>'+(s=="AVAILABLE"?'<td class="attContent">1 / 1</td>':"")+(s=="TAKEN"?'<td class="attContent">0 / 1</td>':"")+(s=="UNKNOWN"?'<td class="attContent">- / 1</td>':"")+(!f||!s?'<td class="attContent">- / 1</td>':"")+"</tr><tr>"+(a?'<tr>                    <td class="att">Parkberechtigte</td>'+(a==""?'<td class="attContent">alle</td>':"")+(a.match("DISABLED")?'<td class="attContent">Behinderte</td>':"")+(a.match("CHARGING")?'<td class="attContent">zum Laden</td>':"")+(a.match("FAMILY")?'<td class="attContent">Familien</td>':"")+"</tr>":"")+(o?'<tr>                        <td class="att">Parkzeiten</td>                        <td class="attContent">'+o+"</td>                    </tr>":"")+(L?'<tr>                        <td class="att">Max. Parkdauer</td>                        <td class="attContent">'+L+"</td>                    </tr>":""):(!T&&!c?"":'<td class="att2">alle (frei/gesamt)</td>')+('<td class="attContent2">'+((f==!1||!g?"-":g)+" / "+(!c&&T==null?"-":c||T))+"</td>")+"</tr>"+(!b||b=="0"?"":'<tr>                        <td class="att2">für Behinderte</td>                        <td class="attContent2">'+b+"</td>                    </tr>")+(!C||C=="0"?"":'<tr>                        <td class="att2">für Frauen</td>                        <td class="attContent2">'+C+"</td>                    </tr>")+(!I||I=="0"?"":'<tr>                        <td class="att2">für Familien</td>                        <td class="attContent2">'+I+"</td>                     </tr>")+(!A||A=="0"?"":'<tr>                        <td class="att2">mit Lademöglichkeit</td>                        <td class="attContent2">'+A+"</td>                    </tr>")+(!k||k=="0"?"":'<tr>                        <td class="att2">für Carsharing</td>                        <td class="attContent2">'+k+"</td>"))+'</tr>            </table>                </div>            </div>            <table id="divURLs">                <tr>'+(l?'<td class="attContentLink"><a href="'+l+'" target="_blank">&#10149 Datengeber<a></td>':"")+(l?'<td class="attContentLink"><a href="https://'+F+`.mobidata-bw.de/park-api/api/public/v3/parking-${p}s/`+u+'" class="photoMargin" target="_blank">&#10149 ParkAPI<a></td>':'<td class="attContentLink"><a href="https://'+F+`.mobidata-bw.de/park-api/api/public/v3/parking-${p}s/`+u+'" target="_blank">&#10149 ParkAPI<a></td>')+(d?'<td class="attContentLink"><a href="'+d+'" class="photoMargin" target="_blank">&#10149 Foto<a></td>':"")+"</tr>            </table>";return setTimeout(()=>{D(r)},0),K}export{w as a,H as o,x as p,j as s,U as t};
