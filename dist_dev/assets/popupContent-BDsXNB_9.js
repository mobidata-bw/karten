import{k as I}from"./addControlLayers-5LnZEaWY.js";import{t as z}from"./timeStamps-0NhGikBN.js";import{p as V}from"./popupImages-mQcC085T.js";function T(n){const g=n.capacity,u=n.realtime_capacity,S=n.realtime_free_capacity;if(S&&g&&(g!=0||u!=0)){const f=document.getElementById("anchor-"+n.id);if(f){const v='<td rowspan="7"><canvas class="canvasPie" id="canvas-'+n.id+'" width="110" height="96"></canvas></td>';f.outerHTML=v;const m=document.getElementById("canvas-"+n.id),a=m.getContext("2d"),r=u||g,t=S/r,y=(r-S)/r,L=(t*100).toFixed(0)+"%",i=(y*100).toFixed(0)+"%",_=(t*100).toFixed(0)+"%";let E=t*2,p=(1-t)*2;const k=["#5ce75c","#8B0000"],O=[L,i],P=[Math.PI*E,Math.PI*p],R=1;let l=-Math.PI/2,h=l;const s=m.width/2-10,c=m.height/2+7,d=40;for(let e=0;e<P.length;e++){l=h,h=h+P[e];const o=(l+h)/2,A=Math.cos(o)*R,b=Math.sin(o)*R;a.beginPath(),a.fillStyle=k[e%k.length],a.moveTo(s+A,c+b),a.arc(s+A,c+b,d,l,h),a.lineTo(s+A,c+b),a.fill(),p!==2&&p!==0&&(a.strokeStyle="white",a.lineWidth=.5,a.stroke());let B=s+Math.cos(o)*(d-18),C=c+Math.sin(o)*(d-18);a.fillStyle="white",a.font="bold 11px Arial",a.textAlign="center",r===S||S===0?a.fillText(_,s,c):((t<.15&&e===0||y<.15&&e===1)&&(a.fillStyle="black",B=s+Math.cos(o)*(d+5),C=c+Math.sin(o)*(d+5)),a.fillText(O[e],B,C))}}}}function H(n){T(n);const{parking_object:g,realtime_data_updated_at:u,realtime_data_outdated:S,has_realtime_data:f,source_id:v,id:m,name:a,operator_name:r,type:t,purpose:y,address:L,park_and_ride_type:i,realtime_opening_status:_,capacity:E,capacity_disabled:p,capacity_woman:k,capacity_family:O,capacity_charging:P,capacity_carsharing:R,realtime_capacity:l,realtime_free_capacity:h,public_url:s,photo_url:c,realtime_status:d,restriction_type:e,restriction_hours:o,restriction_max_stay:A}=n;let b,B;u&&({date:b,time:B}=z(u));let C=new Map;C={2:"Stadt Freiburg im Breisgau",3:"Stadt Heidelberg",6:"DB BahnPark",7:"Parkraumgesellschaft Baden-Württemberg mbH",8:"Stadt Neckarsulm",9:"Verband Region Stuttgart",10:"Stadt Pforzheim",11:"Stadt Reutlingen",12:"Stadt Karlsruhe",15:"Stadt Reutlingen",16:"Verkehrsministerium Baden-Württemberg",21:"Stadt Karlsruhe",22:"Stadt Ellwangen",23:"Stadt Buchen",24:"Stadt Bietigheim-Bissingen",25:"Verkehrsministerium Baden-Württemberg",26:"APCOA PARKING",27:"Stadt Herrenberg",28:"RadVIS",29:"Goldbeck",30:"Open-Data-Plattform Schweiz",31:"Kienzler",33:"Kienzler",34:"Kienzler",35:"Kienzler",36:"Kienzler",37:"Stadt Konstanz",38:"NVBW",39:"NVBW",40:"Verband Region Stuttgart",41:"Verband Region Stuttgart",42:"Verband Region Stuttgart",43:"Verband Region Stuttgart",44:"PARK SERVICE HÜFNER",45:"Stadt Herrenberg",46:"Kienzler",47:"Stadt Konstanz",48:"Stadt Mannheim",49:"VELOBRIX",50:"Verkehrsverbund Rhein-Neckar",51:"Stadt Friedrichshafen",52:"Stadt Freiburg im Breisgau",53:"Stadt Freiburg im Breisgau",54:"Stadt Ulm",55:"Stadt Mannheim",56:"Stadt Freiburg im Breisgau",57:"Stadt Freiburg im Breisgau",58:"B+B Parkhaus GmbH & Co. KG",59:"Stadt Freiburg im Breisgau",60:"Stadt Heidelberg",61:"Stadt Esslingen",62:"Stadt Keltern",63:"Stadt Reutlingen",64:"Stadt Stuttgart",65:"Stadt Aalen",66:"Stadt Konstanz"};let N="",F="";for(let K in C)v==K&&(N+=V(C[K]),F+=`<td class="attContent">${C[K]}</td>`);const M="<table>                <tr>"+N+(a?'<th class="title">'+a+"</th>":"")+"</table><br><table>"+(F==""?"":'<tr>            <td class="att">Datengeber</td>'+F+"</tr>")+(!r||r=="-"||r==""?"":'<tr>            <td class="att">Betreiber</td>            <td class="attContent">'+r+"</td>        </tr> ")+(t?'<tr>            <td class="att">Typ</td>'+(t=="ON_STREET"?'<td class="attContent">Straßen-Parkplatz</td>':"")+(t=="OFF_STREET_PARKING_GROUND"?'<td class="attContent">Parkplatz abseits der Straße</td>':"")+(t=="CAR_PARK"?'<td class="attContent">Parkhaus</td>':"")+(t=="UNDERGROUND"?'<td class="attContent">Tiefgarage</td>':"")+(t=="WALL_LOOPS"?'<td class="attContent">Vorderradhalter</td>':"")+(t=="SAFE_WALL_LOOPS"?'<td class="attContent">Vorderradhalter mit Sicherung</td>':"")+(t=="STANDS"?'<td class="attContent">Anlehnbügel</td>':"")+(t=="LOCKERS"&&y=="BIKE"?'<td class="attContent">Fahrradschrank</td>':"")+(t=="LOCKERS"&&y=="ITEM"||t=="LOCKBOX"?'<td class="attContent">Schließfach</td>':"")+(t=="SHED"?'<td class="attContent">Sammelanlage</td>':"")+(t=="TWO_TIER"?'<td class="attContent">Zweistock-Abstellanlage</td>':"")+(t=="BUILDING"?'<td class="attContent">Parkhaus</td>':"")+(t=="FLOOR"?'<td class="attContent">Abstellfläche</td>':"")+(t=="OTHER"?'<td class="attContent">Sonstige</td>':"")+"</tr>":"")+(!L||L==""?"":'<tr>                <td class="att">Adresse</td>                <td class="attContent">'+L+"</td>            </tr>")+(i?'<tr>            <td class="att">P+R-Typ</td>'+(i=="CARPOOL"?'<td class="attContent">Fahrgemeinschaft</td>':"")+(i=="TRAIN"?'<td class="attContent">Bahn</td>':"")+(i=="BUS"?'<td class="attContent">Bus</td>':"")+(i=="TRAM"?'<td class="attContent">Straßenbahn</td>':"")+(i=="YES"?'<td class="attContent">ja</td>':"")+(i=="NO"?'<td class="attContent">nein</td>':"")+"</tr>":"")+(_?'<tr>            <td class="att">Status</td>'+(_=="OPEN"?'<td class="attContent">geöffnet</td>':"")+(_=="CLOSED"?'<td class="attContent">geschlossen</td>':"")+(_=="UNKNOWN"?'<td class="attContent">unbekannt</td>':"")+"</tr>":"")+(f==!1?"":'<tr>            <td class="att">Stand Echtzeitdaten</td>'+(S?'<td class="attContent outDated">'+b+", "+B+"</td>":'<td class="attContent">'+b+", "+B+"</td>")+"</tr>")+'</tr>            </table>            <br>            <div class="title title2">Parkplätze</div>            <div id="divParkingSites">                <div>                    <div id="anchor-'+m+'"></div>                </div>                <div id="divTable">                    <table>                        <tr>'+(g=="spot"?'<td class="att">alle (frei/gesamt)</td>'+(d=="AVAILABLE"?'<td class="attContent">1 / 1</td>':"")+(d=="TAKEN"?'<td class="attContent">0 / 1</td>':"")+(d=="UNKNOWN"?'<td class="attContent">- / 1</td>':"")+(!f||!d?'<td class="attContent">- / 1</td>':"")+"</tr><tr>"+(e?'<tr>                    <td class="att">Parkberechtigte</td>'+(e==""?'<td class="attContent">alle</td>':"")+(e.match("DISABLED")?'<td class="attContent">Behinderte</td>':"")+(e.match("CHARGING")?'<td class="attContent">zum Laden</td>':"")+(e.match("FAMILY")?'<td class="attContent">Familien</td>':"")+"</tr>":"")+(o?'<tr>                        <td class="att">Parkzeiten</td>                        <td class="attContent">'+o+"</td>                    </tr>":"")+(A?'<tr>                        <td class="att">Max. Parkdauer</td>                        <td class="attContent">'+A+"</td>                    </tr>":""):(!E&&!l?"":'<td class="att2">alle (frei/gesamt)</td>')+('<td class="attContent2">'+((f==!1||!h?"-":h)+" / "+(!l&&E==null?"-":l||E))+"</td>")+"</tr>"+(!p||p=="0"?"":'<tr>                        <td class="att2">für Behinderte</td>                        <td class="attContent2">'+p+"</td>                    </tr>")+(!k||k=="0"?"":'<tr>                        <td class="att2">für Frauen</td>                        <td class="attContent2">'+k+"</td>                    </tr>")+(!O||O=="0"?"":'<tr>                        <td class="att2">für Familien</td>                        <td class="attContent2">'+O+"</td>                     </tr>")+(!P||P=="0"?"":'<tr>                        <td class="att2">mit Lademöglichkeit</td>                        <td class="attContent2">'+P+"</td>                    </tr>")+(!R||R=="0"?"":'<tr>                        <td class="att2">für Carsharing</td>                        <td class="attContent2">'+R+"</td>"))+'</tr>            </table>                </div>            </div>            <table id="divURLs">                <tr>'+(s?'<td class="attContentLink"><a href="'+s+'" target="_blank">&#10149 Datengeber<a></td>':"")+(s?'<td class="attContentLink"><a href="https://'+I+`.mobidata-bw.de/park-api/api/public/v3/parking-${g}s/`+m+'" class="photoMargin" target="_blank">&#10149 ParkAPI<a></td>':'<td class="attContentLink"><a href="https://'+I+`.mobidata-bw.de/park-api/api/public/v3/parking-${g}s/`+m+'" target="_blank">&#10149 ParkAPI<a></td>')+(c?'<td class="attContentLink"><a href="'+c+'" class="photoMargin" target="_blank">&#10149 Foto<a></td>':"")+"</tr>            </table>";return setTimeout(()=>{T(n)},0),M}export{H as p};
