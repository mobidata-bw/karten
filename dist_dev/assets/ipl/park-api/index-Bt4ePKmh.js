import{a as c,l as y,i as _,b as v,c as g,d as O}from"../../addControlLayers-0lIGzMVq.js";import{s as h,a as T,b as D,c as m,l as w,d as x,e as E,p as S,f as z,g as B,h as G}from"../../popupContent-CrG_Yr6f.js";import{u as A}from"../../urlParams-19K38pPV.js";import{s as I}from"../../setupLayerInteractions-CT5YNCWO.js";import"../../timeStamps-DlIY0qCy.js";import"../../popupImages-0K_rmlav.js";window.PUBLIC_PATH="/karten_dev/";const{purpose:b,object:j,geometry:k,controlLayersTitle:d}=A();let o=null;function M(e){if(k=="polygon")e.on("zoomend",function(){const l=e.getZoom();let i;l<13?(i=a.filter(r=>r.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","visible")):(i=a.filter(r=>!r.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","none"));const s={collapsed:!1,layers:c(i,d)};o!=null&&e.removeControl(o),o=new y(s),o._exclusiveAllGroups=!0,e.addControl(o)}),e.fire("zoomend");else if(k==null&&j==null){let l,i;b=="car"?(l=t,i="Behindertenparkplätze"):b=="bicycle"&&(l=L,i="Schließfächer an Fahrradabstellanlagen");const s={collapsed:!1,layers:c(f,d)},r=new y(s);r._exclusiveAllGroups=!0,e.addControl(r,"top-right");const n={collapsed:!1,directoriesCollapsed:!0,layers:c(l,i)},C=new y(n);e.addControl(C,"top-right")}else{const l={collapsed:!1,layers:c(a,d)},i=new y(l);i._exclusiveAllGroups=!0,e.addControl(i,"top-right")}}let a,f,t,L=E;window.addEventListener("DOMContentLoaded",()=>{const{purpose:e,type:l,geometry:i,object:s}=A(),r=_(),n={};e=="bicycle"&&(n.style="bicycle"),v(r,n),r.on("load",()=>{[{id:"sourceParkApiCar",source:h},{id:"sourceParkApiCarLines",source:T},{id:"sourceParkApiCarPolygons",source:D},{id:"sourceParkApiBicycle",source:m}].forEach(u=>g(r,u));let p,P;e=="car"?i==null&&s==null?(p=!0,l==null?t=z:l=="buildings"?t=B:t=G):p=!1:e=="bicycle"&&(P=!0),f=[...w,...x],a=[...f,...p?t:"",...P?L:""],a.forEach(u=>O(r,u)),M(r),I(r,a,S)})});
