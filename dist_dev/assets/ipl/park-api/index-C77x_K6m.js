import{a as n,l as y,i as v,b as g,c as O,d as h}from"../../addControlLayers-BWBFQWHW.js";import{s as T,a as D,b as m,c as w,l as C,d as P,e as x,p as E,f as S,g as G,h as z}from"../../popupContent-D0zpQ939.js";import{u as A}from"../../timeStamps-CJ2Ek9ou.js";import{p as B}from"../../popups-DOvjiyHa.js";import"../../popupImages-BbCFPXc0.js";window.PUBLIC_PATH="/karten_dev/";const{purpose:b,object:I,geometry:k,controlLayersTitle:u}=A();let t=null;function j(e){if(k=="polygon")e.on("zoomend",function(){const a=e.getZoom();let r;a<13?(r=l.filter(i=>i.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","visible")):(r=l.filter(i=>!i.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","none"));const o={collapsed:!1,layers:n(r,u)};t!=null&&e.removeControl(t),t=new y(o),t._exclusiveAllGroups=!0,e.addControl(t)}),e.fire("zoomend");else if(k==null&&I==null){let a,r;b=="car"?(a=c,r="Behindertenparkplätze"):b=="bicycle"&&(a=L,r="Schließfächer an Fahrradabstellanlagen");const o={collapsed:!1,layers:n(_,u)},i=new y(o);i._exclusiveAllGroups=!0,e.addControl(i,"top-right");const d={collapsed:!1,layers:n(a,r)},s=new y(d);e.addControl(s,"top-right")}else{const a={collapsed:!1,layers:n(l,u)},r=new y(a);r._exclusiveAllGroups=!0,e.addControl(r,"top-right")}}let l,_,c,L=x;window.addEventListener("DOMContentLoaded",()=>{const e=v();g(e);const{purpose:a,type:r,geometry:o,object:i}=A();e.on("load",()=>{[{id:"sourceParkApiCar",source:T},{id:"sourceParkApiCarLines",source:D},{id:"sourceParkApiCarPolygons",source:m},{id:"sourceParkApiBicycle",source:w}].forEach(p=>O(e,p));let s,f;a=="car"?o==null&&i==null?(s=!0,r==null?c=S:r=="buildings"?c=G:c=z):s=!1:a=="bicycle"&&(f=!0),_=[...C,...P],l=e.layerGroups({occupancy:C,type:P,...s?{occupancy_disabled:c}:{},...f?{occupancy_item:L}:{}}),l.forEach(p=>h(e,p)),j(e),B(e,l,E)})});
