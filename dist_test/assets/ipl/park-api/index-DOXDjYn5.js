import{a as y,l as p,i as _,b as g,c as v,d as O}from"../../addControlLayers-CsG2aLBG.js";import{s as h,a as T,b as D,c as w,l as m,d as x,e as E,p as S,f as z,g as B,h as G}from"../../popupContent-DCrTVs6z.js";import{u as A}from"../../timeStamps-CJ2Ek9ou.js";import{s as I}from"../../setupLayerInteractions-jdYXsfp0.js";import"../../popupImages-DlH8ZMWs.js";window.PUBLIC_PATH="/karten_test/";const{purpose:b,object:j,geometry:k,controlLayersTitle:f}=A();let t=null;function M(e){if(k=="polygon")e.on("zoomend",function(){const l=e.getZoom();let i;l<13?(i=a.filter(r=>r.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","visible"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","visible")):(i=a.filter(r=>!r.id.includes("Circle")),e.setLayoutProperty("parkApiCarType_Other_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OnStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_OffStreet_Circle","visibility","none"),e.setLayoutProperty("parkApiCarType_CarPark_Circle","visibility","none"));const s={collapsed:!1,layers:y(i,f)};t!=null&&e.removeControl(t),t=new p(s),t._exclusiveAllGroups=!0,e.addControl(t)}),e.fire("zoomend");else if(k==null&&j==null){let l,i;b=="car"?(l=o,i="Behindertenparkplätze"):b=="bicycle"&&(l=L,i="Schließfächer an Fahrradabstellanlagen");const s={collapsed:!1,layers:y(C,f)},r=new p(s);r._exclusiveAllGroups=!0,e.addControl(r,"top-right");const n={collapsed:!1,directoriesCollapsed:!0,layers:y(l,i)},c=new p(n);e.addControl(c,"top-right")}else{const l={collapsed:!1,layers:y(a,f)},i=new p(l);i._exclusiveAllGroups=!0,e.addControl(i,"top-right")}}let a,C,o,L=E;window.addEventListener("DOMContentLoaded",()=>{const{purpose:e,type:l,geometry:i,object:s}=A(),r=_(),n={};e=="bicycle"&&(n.style="bicycle"),g(r,n),r.on("load",()=>{const c=[{id:"sourceParkApiCar",source:h},{id:"sourceParkApiCarLines",source:T},{id:"sourceParkApiCarPolygons",source:D},{id:"sourceParkApiBicycle",source:w}];c.forEach(d=>v(r,d));let u,P;e=="car"?i==null&&s==null?(u=!0,l==null?o=z:l=="buildings"?o=B:o=G):u=!1:e=="bicycle"&&(P=!0),C=[...m,...x],a=[...C,...u?o:"",...P?L:""],a.forEach(d=>O(r,d)),M(r),I(r,a,S,c)})});
