import{n as y,p as n}from"./addControlLayers-D-bF3CN8.js";let _,a=null;function S(e){const r="<a href='https://maplibre.org/' target='_blank'>MapLibre</a>",l="<a href='https://www.openstreetmap.org/copyright' target='_blank'>© OpenStreetMap Mitwirkende</a>",o="<a href='https://www.maptiler.com/copyright/' target='_blank'>© MapTiler</a>",c={streets:{img:`${n}img/basemaps/streets.png`,style:"https://tiles.mobidata-bw.de/styles/streets/style.json",title:"Straßen",attribution:`<div class='maplibregl-ctrl-attrib-inner'> ${r} | ${l} ${o} </div>`},bicycle:{img:`${n}img/basemaps/bicycle.png`,style:"https://tiles.mobidata-bw.de/styles/bicycle/style.json",title:"Fahrrad",attribution:`<div class='maplibregl-ctrl-attrib-inner'> ${r} | ${l} ${o} </div>`},darkmatter:{img:`${n}img/basemaps/darkmatter.png`,style:"https://tiles.mobidata-bw.de/styles/darkmatter/style.json",title:"Dunkelmodus",attribution:`<div class='maplibregl-ctrl-attrib-inner'> ${r} | ${l} ${o} </div>`},aerialphotos:{img:`${n}img/basemaps/aerialphotos.png`,style:"https://tiles.mobidata-bw.de/styles/aerialphotos/style.json",title:"Luftbild",attribution:`<div class='maplibregl-ctrl-attrib-inner'> ${r} | ${l} ${o} <a href='https://www.lgl-bw.de/' target='_blank'>© LGL-BW</a> </div>`},basemap:{img:`${n}img/basemaps/terrain.png`,style:"https://sgx.geodatenzentrum.de/gdz_basemapde_vektor/styles/bm_web_top.json",title:"Geländemodell",attribution:`<div class='maplibregl-ctrl-attrib-inner'> ${r} </div>`}};a=new y.AttributionControl({compact:!0,customAttribution:c.streets.attribution}),e.addControl(a);let p=Object.keys(c)[0];class v{constructor(t){switch(this._options={...t},this._container=document.createElement("div"),this._container.classList.add("maplibregl-ctrl"),this._container.classList.add("maplibregl-ctrl-basemaps"),this._container.classList.add("closed"),this._options.expandDirection||"right"){case"top":this._container.classList.add("reverse");case"down":this._container.classList.add("column");break;case"left":this._container.classList.add("reverse");case"right":this._container.classList.add("row")}this._container.addEventListener("mouseenter",()=>{this._container.classList.remove("closed")}),this._container.addEventListener("mouseleave",()=>{this._container.classList.add("closed")})}onAdd(t){this._map=t;const g=this._options.basemaps;return Object.keys(g).forEach(b=>{const d=g[b],i=document.createElement("img");i.src=d.img,i.classList.add("basemap"),i.dataset.id=b,i.title=d.title,i.addEventListener("click",()=>{const u=this._container.querySelector(".active");u&&u.classList.remove("active"),i.classList.add("active"),t.setStyle(d.style),a!=null&&t.removeControl(a),a=new y.AttributionControl({compact:!0,customAttribution:d.attribution}),t.addControl(a)}),i.classList.add("hidden"),this._container.appendChild(i),this._options.initialBasemap.id===b&&i.classList.add("active")}),this._container}onRemove(){var t;(t=this._container.parentNode)==null||t.removeChild(this._container),delete this._map}}e.setStyle(c[p].style),_=new v({basemaps:c,initialBasemap:{id:p}}),e.addControl(_,"bottom-left");const m=new Map,h=new Map,w=e.addSource.bind(e);e.addSource=(s,t)=>(m.set(s,t),w(s,t));const f=e.addLayer.bind(e);e.addLayer=s=>(h.set(s.id,s),f(s)),e.on("styledata",()=>{setTimeout(()=>{for(let[s,t]of m)e.getSource(s)||e.addSource(s,t);for(let s of h.values())e.getLayer(s.id)||e.addLayer(s);e.getStyle().name=="Dark Matter"&&e.getStyle().layers.filter(t=>t.id.includes("Shape")).forEach(t=>{t.type=="line"?e.setPaintProperty(t.id,"line-color","white"):t.type=="fill"&&e.setPaintProperty(t.id,"fill-color","white")})},0)})}export{S as b};
